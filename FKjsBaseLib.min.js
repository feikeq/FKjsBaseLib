/*
  # FKjsBaseLib
  FK肥客泉JS基础方法库
  
  * FKjsBaseLib v1.5.20220907
  * https://www.FK68.net
  * Copyright (c) 2022 FeikeQ
  *
  * 时间：2009-03-08
  * 修改：2022-09-07
  * 作者：肥客泉 - [https://github.com/feikeq/](https://github.com/feikeq/)
  
  
  ## FKjsBaseLib API 使用文档：
  ### 安装
  ```html
  <script src="./FKjsBaseLib.min.js">＜/script>
  ```
  ### 使用
  ```javascript
  // 直接使用 $$FK$$ 变量像jQuery类似
  $$FK$$.ready(function(){
      // 在网页中所有DOM结构绘制加载完毕后就执行的函数。
  }
  ```
  
  ## 函数方法 function：
    -------------------------------------
  ```
    ver 查看当前JS库版本信息 
    typeOf(obj) 校验数据类型
    isArray(obj) 判断是否为 Array 数组
    isObject(obj) 判断是否为 Object 对象
    trim(text) 去掉字符串前后空格
    JSON(obj||text)  将字符串转为JSON对象或将JSON转为字符串
    ready(fn) 在网页中所有DOM结构绘制加载完毕后就执行的函数
    getRootPath 获取网站根路径(站点及虚拟目录)，获得网站的根目录或虚拟目录的根地址
    getDomain 获取网站主域名根域名
    FKCookie(c_name, value, expireday, path, domain) Cookie操作，获取、设置、删除Cookie
    getCookieArray(text||null) 获取所有Cooike成为对象
    getParameterByName(name, url||null) 获取地址栏URL的参数{ name为必选参数 为要得到的参数名 ,url为可选参数 自定义地址或为空[当前网址]}
    getQueryParams(url||null) 将URL地址里的params=value数据变成数组对象,url为可选参数 自定义地址或为空[当前网址]}
    params(obj) 将JSON数组对象转成字符串参数 params 查询字符串 例 a=1&b=2
    addQueryString(query,url||null) 拼接地址链接URL的参数（检查 url 链接是否已经有参数，添加 ？问号 或 & 与号）
    serializeArray(formClass||formID) 实现form表单序列化的方法
    FKAjax(url, datas, method, callback, head) Ajax方法访问和操纵HTTP管道异步获取资源-自己动fetch或XMLHttpRequest
    realFormatSecond(time)  时间戳里的秒钟转为00:00格式
    timestamp2time(time) 时间字符串或时间戳转化成日期格式
    formatime(time,formatstr) 时间字符串或时间戳按指定方式进行格式化
    log(1,2,3...) 美化debug输出，与console.log差不多是打印输了出到控制台的简化命今
    copy(str) 复制文本到剪切版 成功:true 或 失败:false  执行完函数后，按ctrl + v试试
  ```
  
  ## $ $ FK $ $ 的DOM操作function（可链式操作）：
    -------------------------------------
  ```
    (text) 通过CSS选择器获元素
    get(index) 获元素集合中的第几个
    html 设置被选元素的内容
    css 设置或返回被选元素的一个或多个样式属性
    hide 隐藏被选元素
    smoothScroll 平滑滚动到元素位置
    show(display) 如果被选元素已被隐藏则显示元素（非内联样式需要指定display 默认为 block ）
    attr(name,val) 设置或返回被选元素的属性值
    removeAttr(name) 从被选元素中移除属性
    removeClass(name) 从被选元素移除一个类
    addClass(name) 向被选元素添加一个类
    remove 移除被选元素包括所有的文本和子节点
    append(html) 向匹配元素集合中的每个元素结尾插入由参数指定的内容
    prepend(html) 向匹配元素集合中的每个元素开头插入由参数指定的内容
    after(html) 在匹配的元素之后插入内容
    before(html) 在每个匹配的元素之前插入内容
    closest(text) 返回被选元素的第一个祖先元素
    each(function (index, ele){}) 遍历元素
    on(eventName, callback) 事件监听
  ```
  */
 "use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(w){var __INFO__={plug:"$$FK$$",description:"肥客泉JS基础方法库",version:"1.5.20220907",author:"FeikeQ",CreatTime:"2019-03-08",revised:"FK68.net",ModifTime:"2022-09-07",others:"整个对象将已 .ver() 返回"};w[__INFO__.plug]=function(e){return new w[__INFO__.plug].fn.init(e)},w[__INFO__.plug].fn=w[__INFO__.plug].prototype={init:function(e){if("string"==typeof e){var t=w.document.querySelectorAll(e);Array.prototype.push.apply(this,t)}else Array.prototype.splice.apply(this),Array.prototype.push.apply(this,e);return this},others:"其它属性",size:function(){return this.length}},w[__INFO__.plug].extend=w[__INFO__.plug].fn.extend=function(){var e=arguments[0];for(var t in e)this[t]=e[t]},w[__INFO__.plug].extend({ver:function(){return __INFO__},typeOf:function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},isArray:function(e){return"array"===this.typeOf(e)},isObject:function(e){return"object"===this.typeOf(e)},trim:function(e){return(e||"").replace(/^\s+|\s+$/g,"")},JSON:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=arguments[0];return"string"==typeof e?JSON.parse(e):JSON.stringify(e)}),ready:function(e){"loading"!=w.document.readyState?e():w.document.addEventListener("DOMContentLoaded",e)},getRootPath:function(){var e=w.location.href,t=e.split("/");return delete t[t.length-1],t.join("/")},getDomain:function(){var e=w.location.hostname,t=e.match(/(\w+\.\w+)$/);return t&&t[0]},FKCookie:function(e,t,n,r,o){if(void 0!==t){var a=new Date;return a.setDate(a.getDate()+n),window.document.cookie=e+"="+encodeURIComponent(t)+(null==n?"":"; expires="+a.toGMTString())+(null==r?"":"; path="+r)+(null==o?"":"; domain="+o),!0}var i=window.document.cookie;if(i.length>0){var s=i.indexOf(e+"=");if(-1!=s){s=s+e.length+1;var c=i.indexOf(";",s);return-1==c&&(c=i.length),decodeURIComponent(i.substring(s,c))}}},getCookieArray:function(e){var t=e||w.document.cookie;if(!t)return{};for(var n=t.split(";"),r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a[0].replace(/(^\s*)|(\s*$)/g,""),s=a[1];r[i]=decodeURIComponent(s)}return r},getSearchParam:function(e,t){return new URLSearchParams(t||w.location.search).get(e)},getSearchAllParams:function(e){var t=new URLSearchParams(e||w.location.search),n={},r=!0,o=!1,a=void 0;try{for(var i,s=t.entries()[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=_slicedToArray(i.value,2),u=c[0],f=c[1];n[u]=f}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n},getParameterByName:function(e,t){t||(t=w.location.search.substring(1));var n=new RegExp("[?&]"+e.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+"(?:=([^&#]*))?(?:[&#]|$)","i").exec("?"+t);return n?n[1]?decodeURIComponent(n[1].replace(/\+/g," ")):"":null},getQueryParams:function(e){e||(e=w.location.search.substring(1));for(var t,n={},r=/([^&=]+)=([^&]*)/g;t=r.exec(e);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return n},params:function(e){return Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},addQueryString:function(e,t){if(t||(t=w.location.href),console.log("url",t),w.URL){var n=new w.URL(t);"string"==typeof e&&(e=this.getQueryParams(e));for(var r in e)n.searchParams.append(r,e[r]);t=n.href}else{t+=(-1!=t.indexOf("?")?"&":"?")+e}return t},copy:function(e){var t=document.createElement("textarea");t.setAttribute("readonly","readonly"),t.value=e,document.body.appendChild(t),t.select();var n=document.execCommand("copy");return document.body.removeChild(t),n},serializeArray:function(e){for(var t=w.document.querySelectorAll(e)[0],n={},r=0;r<t.elements.length;r++){var o=t.elements[r];switch(o.type){case void 0:case"button":case"file":case"reset":case"submit":break;case"checkbox":if(o.checked)if(n[o.name])if(this.isArray(n[o.name]))n[o.name].push(o.value);else{var a=n[o.name];n[o.name]=[],n[o.name].push(a),n[o.name].push(o.value)}else n[o.name]=o.value;break;case"radio":if(!o.checked)break;default:o.name&&(n[o.name]?n[o.name]=n[o.name]+","+o.value:n[o.name]=o.value)}}return n},FKAjax:function FKAjax(url,datas,method,callback,head){var $formAPI,$formData,$formHeader,$appHeader;$formAPI=url,$formData=datas,$formHeader=head||{},$appHeader={},"[object Object]"==toString.apply($formData)?(!$formHeader||!$formHeader["Content-Type"]||$formHeader["Content-Type"].indexOf("x-www-form-urlencoded")<0?($formData=JSON.stringify($formData),$appHeader={"Content-Type":"application/json"}):($formData=Object.keys($formData).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent($formData[e])}).join("&"),$appHeader={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}),$formHeader=Object.assign({},$appHeader,$formHeader)):"[object FormData]"==toString.apply($formData)||"string"==typeof $formData&&($appHeader={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},$formHeader=Object.assign({},$appHeader,$formHeader));var fetch_options={method:method,body:$formData,headers:$formHeader,cache:"no-cache",mode:"cors",credentials:"omit"};if("GET"!=method&&"HEAD"!=method||(delete fetch_options.body,delete fetch_options.headers,$formAPI=this.addQueryString($formData,$formAPI)),w.fetch)fetch($formAPI,fetch_options).then(function(e){var t=e.headers.get("content-type");if(t.includes("application/json"))return e.json().then(function(t){return e.ok?{data:t,response:e}:Promise.reject(Object.assign({},t,{status:e.status,statusText:e.statusText}))});if(t.includes("text/html"))return e.text().then(function(t){return e.ok?{data:t,response:e}:Promise.reject({status:e.status,statusText:e.statusText,responseText:t})});throw new Error("Sorry, content-type "+t+" not supported")}).then(function(e){callback&&callback(e.data,e.response)}).catch(function(e){callback&&callback(null,e)});else{var url=$formAPI,data=datas,send_data=[],async=!0,type=method||"get",dataType="json",contenType="application/x-www-form-urlencoded",success=callback,error=console.log;if(null==data)send_data="";else if("object"==(void 0===data?"undefined":_typeof(data))){for(var k in data)send_data.push(encodeURIComponent(k)+"="+encodeURIComponent(data[k]));send_data=send_data.join("&")}var xhr="";try{xhr=new ActiveXObject("microsoft.xmlhttp")}catch(e){try{xhr=new XMLHttpRequest}catch(e){null!=error&&error("您的浏览器不支持ajax！请更换！")}}"get"==type?(xhr.open(type,url+"?"+send_data,async),xhr.send(null)):(xhr.open(type,url,async),xhr.setRequestHeader("content-type",contenType),xhr.send(send_data)),xhr.onreadystatechange=function(){4==xhr.readyState&&(xhr.status>=200&&xhr.status<300?("text"==dataType&&null!=success&&success(xhr.responseText,{ok:1}),"xml"==dataType&&null!=success&&success(xhr.responseXML,{ok:1}),"json"==dataType&&null!=success&&success(eval("("+xhr.responseText+")"),{ok:1})):success(null,xhr))}}},e:function(e,t,n){var r=this,o=arguments[3],a=function(e){if(e&&e.length){for(var n="",r=!1,o=0;o<e.length;o++){var a=e["ch"+i[1]+i[6]+"A"+i[7]](o);"|"==a?r=!0:r?(r=!1,n+=a):n+=t&&void 0!==t[a]?t[a]:a}return n}},i=["6","a","o","e","F","l"],s=String["fr"+i[2]+"mCh"+i[1]+"rC"+i[2]+"d"+i[3]](1*(4+i[0])),c=function(e){if(!e)return!1;var t="undefined"!=typeof window?window:r;if("string"!=typeof e)return!1;var n=e["sp"+i[5]+"i"+i[7]](s)[1],a=e["sp"+i[5]+"i"+i[7]](s)[2];n=function(e){for(var t=e.slice(-1),n=e.slice(0,-1),r=n.length,a=Math.PI.toString(),i=0,s=0;s<r;s++){var c=1*(a[s]||10);c||(c=10),i+=n[s]*c}var u=i%11;return 10==u&&(u=0),o&&f(arguments.callee.name,u,t),t==u?1*n:0}(a+n),a.length<8&&(a=(new t["D"+i[1]+"te"])["g"+i[3]+"t"+i[4]+"ul"+i[5]+"Y"+i[3]+i[1]+"r"]()+a);var c=n*(1*("8"+i[0]+"400")),u=t["D"+i[1]+"te"],l=u["n"+i[2]+"w"](),d=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),p=u["p"+i[1]+"rse"](d);return!(!p||p>l||l>p+1e3*c)},u=function(e){if(e.length)var t=r;for(var n=0;n<e.length;n++){var o=e[n];t[o]&&(t=t[o])}return t};i.push("r"),i.push("t");var f=console[i[5]+i[2]+"g"];return o&&f(r,n),o&&f(void 0===n?"undefined":_typeof(n)),r&&n&&"string"==typeof n?(o&&(f(this),f(a(n)),f(a(e)),f(u(a(n)["sp"+i[5]+"i"+i[7]](s))),f(c(u(a(n)["sp"+i[5]+"i"+i[7]](s))))),c(u(a(n)["sp"+i[5]+"i"+i[7]](s)))?u(a(e)["sp"+i[5]+"i"+i[7]](s)):function(){}):function(){}},realFormatSecond:function(e){var t=void 0===e?"undefined":_typeof(e);if("number"===t||"string"===t){e=parseInt(e);var n=Math.floor(e/60);e-=60*n;return(n<10?"0"+n:n)+":"+("0"+e).slice(-2)}return"00:00"},timestamp2time:function(e){var t=new Date(1*e),n=t.getFullYear(),r=t.getMonth()+1,o=t.getDate();return n+"-"+(r<10?"0"+r:r)+"-"+(o<10?"0"+o:o)+" "+t.toTimeString().substr(0,8)},formatime:function(e,t){var n=new Date(1*e),r={"Y+":n.getFullYear().toString(),"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds(),W:new Array("星期日","星期一","星期二","星期三","星期四","星期五","星期六")[n.getDay()]};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in r)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[o]:("00"+r[o]).substr((""+r[o]).length)));return t},log:function(){if(0!=arguments.length)for(var e=0;e<arguments.length;e++){var t=arguments[e],n=void 0===t?"undefined":_typeof(t);if("object"===n)console.info("%c"+e+"."+n+"%c"+toString.apply(t),"background-color:#606060;color:#fff;border-bottom-left-radius:5px;border-top-left-radius:5px;padding:2px 5px;","background-color:#0073b5;color:#fff;color:#fff;border-bottom-right-radius:5px;border-top-right-radius:5px;padding:2px 5px;"),"[object Array]"===toString.apply(t)?console.table(t):console.warn(t);else{var r="#dd8400";"string"===n&&(r="#00ad2e"),console.log("%c"+e+"."+n+"%c"+t,"background-color:#606060;color:#fff;border-bottom-left-radius:5px;border-top-left-radius:5px;padding:2px 5px;","background-color:"+r+";color:#fff;color:#fff;border-bottom-right-radius:5px;border-top-right-radius:5px;padding:2px 5px;")}}}}),w[__INFO__.plug].fn.init.prototype=w[__INFO__.plug].fn,w[__INFO__.plug].fn.extend({get:function(e){return this[e]},each:function(e){for(var t=0;t<this.length;t++)e(t,this[t]);return this},closest:function(){var e=arguments[0],t=[];return this.each(function(n,r){var o=null;o=e?r.closest(e):r.parentNode,t.push(o)}),w[__INFO__.plug](t)},html:function(){var e=arguments[0];this.each(function(t,n){n.innerHTML=e})},css:function(){if(1==arguments.length)return this[0].style[arguments[0]];var e=arguments[0],t=arguments[1];return this.each(function(n,r){r.style[e]=t}),this},hide:function(){return this.each(function(e,t){t.style.display="none"}),this},show:function(e){return this.each(function(t,n){"none"===n.style.display?n.style.display="":n.style.display=e||"block"}),this},attr:function(){if(1==arguments.length)return this[0].getAttribute(arguments[0]);var e=arguments[0],t=arguments[1];return this.each(function(n,r){r.setAttribute(e,t)}),this},removeAttr:function(){var e=arguments[0];return this.each(function(t,n){n.removeAttribute?n.removeAttribute(e):n.attributes.removeNamedItem(e)}),this},removeClass:function(){var e=arguments[0];return this.each(function(t,n){n.classList.remove(e)}),this},addClass:function(){var e=arguments[0];return this.each(function(t,n){n.classList.add(e)}),this},remove:function(){return this.each(function(e,t){t.remove()}),this},append:function(){var e=arguments[0];return this.each(function(t,n){"string"==typeof e?n.insertAdjacentHTML("beforeEnd",e):n.insertAdjacentElement("beforeEnd",e)}),this},prepend:function(){var e=arguments[0];return this.each(function(t,n){"string"==typeof e?n.insertAdjacentHTML("afterBegin",e):n.insertAdjacentElement("afterBegin",e)}),this},after:function(){var e=arguments[0];return this.each(function(t,n){"string"==typeof e?n.insertAdjacentHTML("afterEnd",e):n.insertAdjacentElement("afterEnd",e)}),this},before:function(){var e=arguments[0];return this.each(function(t,n){"string"==typeof e?n.insertAdjacentHTML("beforebegin",e):n.insertAdjacentElement("beforebegin",e)}),this},smoothScroll:function(){return this.each(function(e,t){t.scrollIntoView({behavior:"smooth"})}),this},on:function(e,t){this.each(function(n,r){r.addEventListener(e,t)})}})}(window);
